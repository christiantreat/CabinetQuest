<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cabinet Quest - Admin Panel</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: rgba(0, 0, 0, 1);
            padding: 20px;
            color: white;
        }

        .admin-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .admin-header {
            background: #2C2C2C;
            border: 3px solid #4CAF50;
            box-shadow: 3px 3px 0 #000;
            padding: 20px;
            margin-bottom: 20px;
        }

        .admin-title {
            font-family: "Courier New", monospace;
            font-size: clamp(24px, 6vw, 36px);
            color: #ffd700;
            text-transform: uppercase;
            text-shadow: 2px 2px #000;
            letter-spacing: 4px;
            text-align: center;
            border-bottom: 2px solid #ffd700;
            padding-bottom: 10px;
            margin-bottom: 15px;
        }

        .mode-switch {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 15px;
        }

        .mode-button {
            font-family: "Courier New", monospace;
            padding: 12px 25px;
            border: 2px solid #fff;
            box-shadow: 3px 3px 0 #000;
            font-weight: bold;
            letter-spacing: 2px;
            text-transform: uppercase;
            cursor: pointer;
            background: #4169e1;
            color: white;
            text-decoration: none;
            display: inline-block;
        }

        .mode-button:active {
            transform: translate(3px, 3px);
            box-shadow: none;
        }

        .tab-container {
            background: #2C2C2C;
            border: 3px solid #2C2C2C;
            box-shadow: 3px 3px 0 #000;
            padding: 20px;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #45a049;
            padding-bottom: 10px;
        }

        .tab {
            font-family: "Courier New", monospace;
            padding: 10px 20px;
            background: #1a1a1a;
            border: 2px solid #45a049;
            color: #f0f0f0;
            cursor: pointer;
            font-weight: bold;
            letter-spacing: 1px;
        }

        .tab.active {
            background: #4CAF50;
            border-color: #ffd700;
            color: #ffd700;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .info-box {
            background: #1a1a1a;
            border: 2px solid #4CAF50;
            padding: 15px;
            margin-bottom: 20px;
            font-family: "Courier New", monospace;
            color: #f0f0f0;
            line-height: 1.6;
        }

        .section-title {
            font-family: "Courier New", monospace;
            font-size: clamp(18px, 4vw, 24px);
            color: #ffd700;
            margin: 20px 0 15px 0;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .export-import-section {
            background: #1a1a1a;
            border: 2px solid #8b008b;
            padding: 20px;
            margin-top: 30px;
        }

        .export-button, .import-button {
            font-family: "Courier New", monospace;
            padding: 12px 25px;
            border: 2px solid #fff;
            box-shadow: 3px 3px 0 #000;
            font-weight: bold;
            letter-spacing: 2px;
            text-transform: uppercase;
            cursor: pointer;
            margin: 10px 10px 10px 0;
        }

        .export-button {
            background: #4CAF50;
            color: white;
        }

        .import-button {
            background: #4169e1;
            color: white;
        }

        textarea {
            width: 100%;
            min-height: 200px;
            background: #2C2C2C;
            border: 2px solid #45a049;
            color: #f0f0f0;
            font-family: "Courier New", monospace;
            padding: 10px;
            margin-top: 10px;
        }

        .save-message {
            font-family: "Courier New", monospace;
            color: #4CAF50;
            margin-top: 15px;
            padding: 10px;
            background: #1a1a1a;
            border: 2px solid #4CAF50;
            display: none;
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <div class="admin-header">
            <div class="admin-title">Admin Control Panel</div>
            <div class="mode-switch">
                <a href="learner.html" class="mode-button">Switch to Learner Mode</a>
                <a href="index.html" class="mode-button">View Original Game</a>
            </div>
        </div>

        <div class="tab-container">
            <div class="tabs">
                <div class="tab active" onclick="switchTab('scenarios')">Scenario Configuration</div>
                <div class="tab" onclick="switchTab('room')">Room Layout</div>
                <div class="tab" onclick="switchTab('items')">Item Database</div>
                <div class="tab" onclick="switchTab('export')">Export/Import</div>
            </div>

            <!-- Scenarios Tab -->
            <div class="tab-content active" id="scenarios-tab">
                <div class="info-box">
                    <strong>Scenario Configuration:</strong> Configure teaching scenarios, missions, and learning objectives for learners.
                    This section controls what tasks learners need to complete.
                </div>
                <div class="section-title">Redirect to Scenario Setup</div>
                <p style="font-family: 'Courier New', monospace; color: #f0f0f0; margin: 15px 0;">
                    The full scenario configuration interface is available in the main application.
                </p>
                <a href="index.html" class="export-button">Open Scenario Configuration</a>
            </div>

            <!-- Room Layout Tab -->
            <div class="tab-content" id="room-tab">
                <div class="info-box">
                    <strong>Room Layout Configuration:</strong> Design the trauma room layout by placing equipment, cabinets,
                    and furniture. Define interactive elements (cabinets with drawers) and static equipment.
                </div>
                <div class="section-title">Room Layout Editor</div>
                <p style="font-family: 'Courier New', monospace; color: #f0f0f0;">
                    The room layout editor allows you to visually place and configure equipment in the trauma room.
                    For now, edit the JSON configuration below and use the Export/Import tab to save your changes.
                </p>
                <textarea id="roomLayoutJson"></textarea>
                <button class="export-button" onclick="saveRoomLayout()">Save Room Layout</button>
                <div class="save-message" id="roomSaveMessage">Room layout saved successfully!</div>
            </div>

            <!-- Items Tab -->
            <div class="tab-content" id="items-tab">
                <div class="info-box">
                    <strong>Item Database:</strong> Configure all items available in the simulation, including their
                    descriptions, locations, and educational information.
                </div>
                <div class="section-title">Item Database Editor</div>
                <p style="font-family: 'Courier New', monospace; color: #f0f0f0;">
                    Edit item information, descriptions, and locations. This data is used in the Reference Library
                    for learners.
                </p>
                <textarea id="itemDatabaseJson"></textarea>
                <button class="export-button" onclick="saveItemDatabase()">Save Item Database</button>
                <div class="save-message" id="itemSaveMessage">Item database saved successfully!</div>
            </div>

            <!-- Export/Import Tab -->
            <div class="tab-content" id="export-tab">
                <div class="info-box">
                    <strong>Export/Import Configuration:</strong> Export all configuration data to share with others
                    or backup your setup. Import configuration files to restore or update the system.
                </div>

                <div class="section-title">Export Configuration</div>
                <button class="export-button" onclick="exportAllConfig()">Export All Configuration</button>
                <textarea id="exportTextarea" readonly></textarea>

                <div class="section-title">Import Configuration</div>
                <textarea id="importTextarea" placeholder="Paste configuration JSON here..."></textarea>
                <button class="import-button" onclick="importConfig()">Import Configuration</button>
                <div class="save-message" id="importMessage"></div>
            </div>
        </div>
    </div>

    <script>
        // Default configurations
        const defaultRoomLayout = {
            roomWidth: 20,
            roomHeight: 15,
            equipment: [
                {id: "equipment-0", name: "Stretcher", x: 8, y: 3, width: 3.77, height: 7.5, color: "rgb(239, 68, 68)", interactive: false},
                {id: "equipment-1", name: "Procedure Table", x: 5, y: 6, width: 1.93, height: 2.87, color: "rgb(245, 158, 11)", interactive: false},
                {id: "equipment-2", name: "Intubation Table", x: 8, y: 0, width: 4, height: 2, color: "rgb(251, 146, 60)", interactive: false},
                {id: "equipment-3", name: "Code Cart", x: 17, y: 8, width: 2.5, height: 2.27, color: "rgb(16, 185, 129)", interactive: true},
                {id: "equipment-4", name: "Airway Cart", x: 17, y: 5, width: 2.5, height: 2.27, color: "rgb(59, 130, 246)", interactive: true},
                {id: "equipment-5", name: "Trauma Cart", x: 0, y: 7, width: 2.5, height: 2.27, color: "rgb(139, 92, 246)", interactive: true},
                {id: "equipment-6", name: "Green Cart", x: 5, y: 0, width: 2.5, height: 2.27, color: "rgb(34, 197, 94)", interactive: true}
            ]
        };

        const defaultItemDatabase = {
            "Item 1": {
                name: "Scalpel #10",
                description: "A sterile surgical blade used for making precise incisions",
                uses: "Skin incisions, emergency procedures",
                cart: "Trauma Cart",
                drawer: "Drawer 1"
            }
            // Add more items as needed
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadConfig();
        });

        function loadConfig() {
            const savedRoom = localStorage.getItem('roomLayout');
            const savedItems = localStorage.getItem('itemDatabase');

            document.getElementById('roomLayoutJson').value =
                JSON.stringify(savedRoom ? JSON.parse(savedRoom) : defaultRoomLayout, null, 2);

            document.getElementById('itemDatabaseJson').value =
                JSON.stringify(savedItems ? JSON.parse(savedItems) : defaultItemDatabase, null, 2);
        }

        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            event.target.classList.add('active');
            document.getElementById(tabName + '-tab').classList.add('active');
        }

        function saveRoomLayout() {
            try {
                const json = document.getElementById('roomLayoutJson').value;
                const parsed = JSON.parse(json);
                localStorage.setItem('roomLayout', JSON.stringify(parsed));
                showMessage('roomSaveMessage');
            } catch (e) {
                alert('Invalid JSON format: ' + e.message);
            }
        }

        function saveItemDatabase() {
            try {
                const json = document.getElementById('itemDatabaseJson').value;
                const parsed = JSON.parse(json);
                localStorage.setItem('itemDatabase', JSON.stringify(parsed));
                showMessage('itemSaveMessage');
            } catch (e) {
                alert('Invalid JSON format: ' + e.message);
            }
        }

        function exportAllConfig() {
            const config = {
                roomLayout: JSON.parse(localStorage.getItem('roomLayout') || JSON.stringify(defaultRoomLayout)),
                itemDatabase: JSON.parse(localStorage.getItem('itemDatabase') || JSON.stringify(defaultItemDatabase)),
                scenarios: JSON.parse(localStorage.getItem('scenarios') || '[]'),
                timestamp: new Date().toISOString()
            };
            document.getElementById('exportTextarea').value = JSON.stringify(config, null, 2);
        }

        function importConfig() {
            try {
                const json = document.getElementById('importTextarea').value;
                const config = JSON.parse(json);

                if (config.roomLayout) localStorage.setItem('roomLayout', JSON.stringify(config.roomLayout));
                if (config.itemDatabase) localStorage.setItem('itemDatabase', JSON.stringify(config.itemDatabase));
                if (config.scenarios) localStorage.setItem('scenarios', JSON.stringify(config.scenarios));

                loadConfig();
                const msg = document.getElementById('importMessage');
                msg.textContent = 'Configuration imported successfully!';
                msg.style.display = 'block';
                msg.style.borderColor = '#4CAF50';
                msg.style.color = '#4CAF50';
                setTimeout(() => msg.style.display = 'none', 3000);
            } catch (e) {
                const msg = document.getElementById('importMessage');
                msg.textContent = 'Import failed: ' + e.message;
                msg.style.display = 'block';
                msg.style.borderColor = '#ef4444';
                msg.style.color = '#ef4444';
            }
        }

        function showMessage(elementId) {
            const el = document.getElementById(elementId);
            el.style.display = 'block';
            setTimeout(() => el.style.display = 'none', 3000);
        }
    </script>
</body>
</html>
